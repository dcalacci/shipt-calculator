# vi: syntax=Dockerfile

# pinned to this version so we can use python3.7
# there are no wheels for pystan in python 3.8 which
# causes dreadfully long build times
# it is not advised to use `latest` at this time.
FROM python:3.7-slim
FROM jjanzic/docker-python3-opencv
#FROM jjanzic/docker-python3-opencv:opencv-4.0.1

WORKDIR /app
ENV PYTHONIOENCODING=utf-8
RUN apt clean && apt update && apt install -y libsm6 libxext6
RUN apt-get -y install tesseract-ocr

RUN pip install --upgrade pip
ADD ./requirements.txt /app/requirements.txt
RUN pip install -r requirements.txt

COPY . /app
EXPOSE 5000
ENTRYPOINT ["flask"]
CMD ["run", "--host=0.0.0.0"]
